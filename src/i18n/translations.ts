type TranslationDict = Record<string, string>

interface LocaleTable {
  code: string
  label: string
  translations: TranslationDict
}

export const locales: LocaleTable[] = [
  {
    code: 'ru',
    label: 'Русский',
    translations: {
      'menu.title': 'Шёпот за стеной',
      'menu.newGame': 'Новая партия',
      'menu.collections': 'Коллекции',
      'menu.settings': 'Настройки',
      'menu.statistics': 'Статистика партий',
      'menu.version': 'Версия',
      'menu.install': 'Добавить на экран',
      'menu.iosInstallTitle': 'Как установить на iOS',
      'menu.iosInstallInstructions': 'Нажмите кнопку "Поделиться" внизу экрана, затем выберите "На экран «Домой»"',
      'statistics.players': 'Игроки',
      'statistics.title': 'Статистика партий',
      'statistics.empty': 'Пока нет сыгранных партий — начните новую, и результаты появятся здесь.',
      'statistics.startedAt': 'Начало партии',
      'statistics.killer': 'Убийца',
      'statistics.survivors': 'Жертвы',
      'statistics.duration': 'Время (мин)',
      'statistics.outcomeLabel': 'Итог',
      'statistics.outcome.killer': 'Победа убийцы',
      'statistics.outcome.survivors': 'Победа жертв',
      'statistics.outcome.unknown': 'Без результата',
      'statistics.winner': 'Победитель',
      'statistics.delete': 'Удалить запись',
      'statistics.deleteCancel': 'Отмена',
      'statistics.deleteConfirm': 'Удалить',
      'statistics.showAll': 'Показать все',
      'statistics.showLess': 'Показать меньше',
      'console.timer': 'Таймер партии',
      'console.playersTitle': 'Игроки',
      'console.playerTagKiller': 'Убийца',
      'console.playerTagSurvivor': 'Жертва',
      'console.winnerBadge': 'Победитель',
      'console.playersEmpty': 'Игроки пока не назначены.',
      'console.matchFinished': 'Партия завершена',
      'console.outcomeLabelSingle': '— победил',
      'console.outcomeLabelPlural': '— победили',
      'console.finishPromptKiller': 'Как завершилась партия для убийцы?',
      'console.finishPromptSurvivor': 'Что произошло с игроком?',
      'console.playerWinOption': 'Игрок победил',
      'console.playerDeadOption': 'Игрок погиб',
      'console.killerWinOption': 'Убийца победил',
      'console.killerLoseOption': 'Убийца проиграл',
      'console.finishCancel': 'Отмена',
      'console.timerStoppedWarning': 'Таймер остановился после перезагрузки страницы. Время не будет учитываться.',
      'console.startNewGame': 'Начать новую партию',
      'console.continueWithoutTimer': 'Продолжить без отслеживания времени',
      'console.viewStatistics': 'Посмотреть статистику',
      'console.exitConfirmTitle': 'Выйти из партии?',
      'console.exitConfirmMessage': 'Партия ещё не завершена. Вы уверены, что хотите выйти без выбора победителя?',
      'console.exitConfirmCancel': 'Остаться',
      'console.exitConfirmProceed': 'Выйти',
      'collections.title': 'Коллекции звуков',
      'collections.base': 'База',
      'collections.dlc': 'Дополнение',
      'collections.activate': 'Активировать',
      'setup.title': 'Выбор набора',
      'setup.killer': 'Убийца',
      'setup.killerTraits': 'Особенности',
      'setup.killerLabel': 'Убийца',
      'setup.openSurvivors': 'Выбрать жертв',
      'setup.previousKiller': 'Предыдущий убийца',
      'setup.nextKiller': 'Следующий убийца',
      'setup.survivors': 'Жертвы',
      'setup.openRoles': 'Распределить роли',
      'setup.roles': 'Назначение ролей',
      'setup.items': 'Предметы',
      'setup.start': 'Начать игру',
      'setup.survivorsHint': 'Нет доступных жертв. Подключите дополнительные наборы.',
      'setup.rolesHint': 'Выберите убийцу и хотя бы одну жертву, чтобы назначить роли игрокам.',
      'setup.selectedSurvivors': 'Выбранные жертвы',
      'setup.survivorSlots': 'Слотов жертв',
      'setup.backToKiller': 'Вернуться к выбору убийцы',
      'setup.backToSurvivors': 'Вернуться к выбору жертв',
      'setup.survivorSingular': 'Жертва',
      'setup.playerName': 'Имя игрока',
      'setup.assignToOthers': 'Назначить другим жертвам',
      'setup.assignHide': 'Скрыть назначения',
      'setup.assignLabel': 'Назначить имя для',
      'setup.confirmStartMissingNames':
        'Не все имена игроков заполнены. Продолжить? Имена будут отображаться в статистике партии.',
      'setup.missingNamesTitle': 'Не все имена заполнены',
      'setup.missingNamesMessage': 'Введите имена всех игроков. Они будут отображаться в статистике партии.',
      'setup.missingNamesCancel': 'Заполнить имена',
      'setup.missingNamesProceed': 'Продолжить без имён',
      'setup.assignedFromLabel': 'Назначено от',
      'console.title': 'Игровой пульт',
      'console.finish': 'Завершить',
      'console.muteAll': 'Глушить всё',
      'console.mix': 'Микшер',
      'console.queue': 'Очередь',
      'console.scenarios': 'Сценарии',
      'console.bookmarks': 'Закладки',
      'settings.title': 'Настройки',
      'settings.language': 'Язык',
      'settings.theme': 'Тема',
      'settings.audio': 'Громкость',
      'settings.cache': 'Оффлайн-кэш',
      'settings.install': 'Установить приложение',
      'settings.installDescription': 'Установите приложение на устройство для работы офлайн.',
      'settings.installed': 'Приложение установлено. Работает офлайн.',
      'settings.installNotAvailable': 'Установка доступна только в поддерживаемых браузерах.',
      'settings.resetStats': 'Сбросить статистику',
      'settings.resetStatsDescription': 'Очистить историю партий, накопленные результаты и настройки языка.',
      'settings.storage': 'Хранилище',
      'settings.storageDescription': 'Использовано localStorage:',
      'settings.madeBy': 'Разработал',
      'settings.artBy': 'Дизайн артов',
      'settings.localizationThanks': 'Особая благодарность',
      'settings.localizationThanksText': 'за русскую локализацию',
      'settings.nonCommercial': 'Только для некоммерческого использования',
    },
  },
  {
    code: 'en',
    label: 'English',
    translations: {
      'menu.title': 'Terrorscape',
      'menu.newGame': 'New Game',
      'menu.collections': 'Collections',
      'menu.settings': 'Settings',
      'menu.statistics': 'Match statistics',
      'menu.version': 'Version',
      'menu.install': 'Add to Home Screen',
      'menu.iosInstallTitle': 'How to install on iOS',
      'menu.iosInstallInstructions': 'Tap the "Share" button at the bottom, then select "Add to Home Screen"',
      'statistics.players': 'Players',
      'statistics.title': 'Match statistics',
      'statistics.empty': 'No matches recorded yet. Start a game and the history will appear here.',
      'statistics.startedAt': 'Match started',
      'statistics.killer': 'Killer',
      'statistics.survivors': 'Survivors',
      'statistics.duration': 'Time (min)',
      'statistics.outcomeLabel': 'Outcome',
      'statistics.outcome.killer': 'Killer victory',
      'statistics.outcome.survivors': 'Survivor victory',
      'statistics.outcome.unknown': 'No outcome recorded',
      'statistics.winner': 'Winner',
      'statistics.delete': 'Delete entry',
      'statistics.deleteCancel': 'Cancel',
      'statistics.deleteConfirm': 'Delete',
      'statistics.showAll': 'Show all',
      'statistics.showLess': 'Show less',
      'console.timer': 'Match timer',
      'console.playersTitle': 'Players',
      'console.playerTagKiller': 'Killer',
      'console.playerTagSurvivor': 'Survivor',
      'console.winnerBadge': 'Winner',
      'console.playersEmpty': 'No players assigned yet.',
      'console.matchFinished': 'Match finished',
      'console.outcomeLabelSingle': '— won',
      'console.outcomeLabelPlural': '— won',
      'console.finishPromptKiller': 'What happened to the killer?',
      'console.finishPromptSurvivor': 'What happened to the player?',
      'console.playerWinOption': 'Player won',
      'console.playerDeadOption': 'Player died',
      'console.killerWinOption': 'Killer won',
      'console.killerLoseOption': 'Killer lost',
      'console.finishCancel': 'Cancel',
      'console.timerStoppedWarning': 'Timer stopped after page reload. Time will not be tracked.',
      'console.startNewGame': 'Start new game',
      'console.continueWithoutTimer': 'Continue without time tracking',
      'console.viewStatistics': 'View statistics',
      'console.exitConfirmTitle': 'Exit the match?',
      'console.exitConfirmMessage': 'The match is not finished yet. Are you sure you want to exit without selecting a winner?',
      'console.exitConfirmCancel': 'Stay',
      'console.exitConfirmProceed': 'Exit',
      'collections.title': 'Sound Collections',
      'collections.base': 'Core',
      'collections.dlc': 'Expansion',
      'collections.activate': 'Activate',
      'setup.title': 'Select Loadout',
      'setup.killer': 'Killer',
      'setup.killerTraits': 'Traits',
      'setup.killerLabel': 'Killer',
      'setup.openSurvivors': 'Choose Survivors',
      'setup.previousKiller': 'Previous killer',
      'setup.nextKiller': 'Next killer',
      'setup.survivors': 'Survivors',
      'setup.openRoles': 'Assign roles',
      'setup.roles': 'Role assignment',
      'setup.items': 'Items',
      'setup.start': 'Start game',
      'setup.survivorsHint': 'No Survivors available. Enable additional packs.',
      'setup.rolesHint': 'Pick a killer and at least one Survivor before assigning players.',
      'setup.selectedSurvivors': 'Selected Survivors',
      'setup.survivorSlots': 'Survivor slots',
      'setup.backToKiller': 'Back to killer selection',
      'setup.backToSurvivors': 'Back to survivor selection',
      'setup.survivorSingular': 'Survivor',
      'setup.playerName': 'Player name',
      'setup.assignToOthers': 'Assign to other survivors',
      'setup.assignHide': 'Hide assignments',
      'setup.assignLabel': 'Assign name for',
      'setup.confirmStartMissingNames':
        'Some player names are still empty. Continue anyway? Names will appear in the match statistics.',
      'setup.missingNamesTitle': 'Some names are missing',
      'setup.missingNamesMessage': 'Please enter names for every player. They appear in the match statistics.',
      'setup.missingNamesCancel': 'Fill in names',
      'setup.missingNamesProceed': 'Continue without names',
      'setup.assignedFromLabel': 'Assigned from',
      'console.title': 'Game Console',
      'console.finish': 'Finish',
      'console.muteAll': 'Mute all',
      'console.mix': 'Mixer',
      'console.queue': 'Queue',
      'console.scenarios': 'Scenarios',
      'console.bookmarks': 'Bookmarks',
      'settings.title': 'Settings',
      'settings.language': 'Language',
      'settings.theme': 'Theme',
      'settings.audio': 'Volume',
      'settings.cache': 'Offline cache',
      'settings.install': 'Install app',
      'settings.installDescription': 'Install the app on your device for offline use.',
      'settings.installed': 'App is installed. Works offline.',
      'settings.installNotAvailable': 'Installation is only available in supported browsers.',
      'settings.resetStats': 'Reset statistics',
      'settings.resetStatsDescription': 'Clear match history, accumulated results, and language preference.',
      'settings.storage': 'Storage',
      'settings.storageDescription': 'localStorage used:',
      'settings.madeBy': 'Made by',
      'settings.artBy': 'Art are made by',
      'settings.localizationThanks': 'Special thanks to',
      'settings.localizationThanksText': 'for Russian localization',
      'settings.nonCommercial': 'For non-commercial use only',
    },
  },
]

const translationMap = locales.reduce<Record<string, TranslationDict>>((map, locale) => {
  map[locale.code] = locale.translations
  return map
}, {})

export type LocaleCode = (typeof locales)[number]['code']

export const defaultLocale: LocaleCode = 'ru'

export function translate(locale: LocaleCode, key: string, fallback?: string): string {
  const table = translationMap[locale]
  if (!table) {
    return fallback ?? key
  }
  return table[key] ?? fallback ?? key
}
